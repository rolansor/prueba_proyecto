<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>OrientaciÃ³n rÃ¡pida de sÃ­ntomas (demo)</title>
  <style>
    :root{--bg:#0f172a;--card:#111827;--muted:#6b7280;--accent:#22d3ee;--ok:#10b981;--warn:#f59e0b;--err:#ef4444;--txt:#e5e7eb}
    *{box-sizing:border-box}
    body{margin:0;font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu;line-height:1.35;background:linear-gradient(180deg,#020617,#0b1022);color:var(--txt);min-height:100dvh;}
    .wrap{max-width:900px;margin:0 auto;padding:24px}
    header{display:flex;align-items:center;gap:16px;margin:20px 0 12px}
    header .logo{width:44px;height:44px;border-radius:12px;background:radial-gradient(circle at 30% 30%, var(--accent), transparent 60%),linear-gradient(135deg,#111,#333);display:grid;place-items:center;box-shadow:0 10px 30px rgba(34,211,238,.25)}
    header h1{font-size:clamp(20px,3vw,28px);margin:0}
    .card{background:linear-gradient(180deg,#0b1222,#0a0f1b);border:1px solid rgba(255,255,255,.06);border-radius:16px;padding:20px;box-shadow:0 10px 30px rgba(2,6,23,.45)}
    .grid{display:grid;grid-template-columns:1fr;gap:16px}
    @media (min-width:880px){.grid{grid-template-columns:1.1fr .9fr}}
    fieldset{border:0;margin:0;padding:0}
    legend{font-weight:700;margin-bottom:8px}
    label{display:flex;align-items:center;gap:10px;margin:8px 0}
    input[type="text"], select, textarea{width:100%;background:#0c1323;color:var(--txt);border:1px solid rgba(255,255,255,.08);border-radius:10px;padding:12px}
    .btn{display:inline-flex;align-items:center;gap:8px;background:linear-gradient(180deg,#1f2937,#111827);color:var(--txt);border:1px solid rgba(255,255,255,.12);border-radius:12px;padding:10px 14px;cursor:pointer}
    .btn:hover{border-color:rgba(255,255,255,.25)}
    .btn.primary{background:linear-gradient(180deg,#0ea5e9,#0284c7);color:#05131f;border:none}
    .muted{color:var(--muted);font-size:14px}
    .pill{display:inline-block;padding:6px 10px;border-radius:999px;background:#0c1323;border:1px solid rgba(255,255,255,.08);font-size:12px}
    .rec{display:flex;flex-direction:column;gap:10px}
    .rec-item{border:1px solid rgba(255,255,255,.08);border-radius:12px;padding:12px;background:#0b1222}
    .rec-item h4{margin:0 0 6px;font-size:16px}
    .proscons{display:grid;grid-template-columns:1fr 1fr;gap:10px}
    .proscons ul{margin:0 0 0 18px}
    .badge-ok{color:#052; background:#052a; border:1px solid #0f55}
    .badge-warn{color:#3d2a05; background:#3d2a05aa; border:1px solid #7a520b}
    .disclaimer{font-size:13px;color:#c7cbd6;background:#0a0f1b;border:1px dashed rgba(255,255,255,.15);border-radius:12px;padding:12px}
    footer{margin:20px 0;color:#94a3b8;font-size:13px}
    .qr{display:none;margin-top:8px}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="logo" aria-hidden="true">ğŸ©º</div>
      <div>
        <h1>OrientaciÃ³n rÃ¡pida de sÃ­ntomas <span class="pill">DEMO</span></h1>
        <div class="muted">No es diagnÃ³stico mÃ©dico. Para urgencias, acude a un servicio de salud.</div>
      </div>
    </header>

    <div class="grid">
      <section class="card">
        <form id="form">
          <fieldset>
            <legend>Â¿QuÃ© presentas hoy?</legend>
            <label><input type="checkbox" name="sym" value="fiebre" /> Fiebre</label>
            <label><input type="checkbox" name="sym" value="tos" /> Tos</label>
            <label><input type="checkbox" name="sym" value="dolor_garganta" /> Dolor de garganta</label>
            <label><input type="checkbox" name="sym" value="congestion" /> CongestiÃ³n nasal</label>
            <label><input type="checkbox" name="sym" value="dolor_cabeza" /> Dolor de cabeza / migraÃ±a</label>
            <label><input type="checkbox" name="sym" value="dolor_muscular" /> Dolor muscular / golpes</label>
            <label><input type="checkbox" name="sym" value="nausea" /> NÃ¡useas / malestar digestivo</label>
            <label><input type="checkbox" name="sym" value="acidez" /> Acidez estomacal</label>
            <label><input type="checkbox" name="sym" value="insomnio" /> Ansiedad / insomnio</label>
            <label><input type="checkbox" name="sym" value="irritacion_piel" /> IrritaciÃ³n cutÃ¡nea / quemadura leve</label>
            <label><input type="checkbox" name="sym" value="heridas_leves" /> Heridas leves / aftas</label>
            <label><input type="checkbox" name="sym" value="mal_aliento" /> Mal aliento</label>
            <label><input type="checkbox" name="sym" value="retencion_liquidos" /> RetenciÃ³n de lÃ­quidos</label>
          </fieldset>

          <div style="margin-top:12px"></div>
          <label>
            Posible condiciÃ³n (autorreporte)
            <select id="cond">
              <option value="">â€” Selecciona â€”</option>
              <option value="gripe">Gripe / resfriado</option>
              <option value="migraÃ±a">MigraÃ±a / cefalea</option>
              <option value="dolor_muscular">Dolor muscular</option>
              <option value="indef">No sÃ© / prefiero que me orienten</option>
            </select>
          </label>

          <div style="display:flex;gap:10px;margin-top:14px">
            <button class="btn primary" type="submit">Ver sugerencias</button>
            <button class="btn" id="btnReset" type="button">Limpiar</button>
          </div>
        </form>

        <div class="disclaimer" style="margin-top:14px">
          <strong>Aviso de seguridad:</strong> este sitio es educativo y genÃ©rico. No reemplaza una evaluaciÃ³n clÃ­nica.
          Revisa siempre contraindicaciones y <em>etiquetas</em> de medicamentos. Si hay dolor intenso, dificultad para
          respirar, fiebre alta persistente, rigidez de cuello, confusiÃ³n, deshidrataciÃ³n o sÃ­ntomas en niÃ±os pequeÃ±os
          o embarazadas, busca atenciÃ³n profesional.
        </div>
      </section>

      <aside class="card">
        <h3 style="margin-top:0">Sugerencias</h3>
        <div id="out" class="rec"></div>

        <details style="margin-top:10px">
          <summary>ğŸ’¡ Activar orientaciÃ³n con IA (demo)</summary>
          <p class="muted">Esta secciÃ³n puede conectarse a una API de IA de bajo costo. AquÃ­ simulamos una llamada.</p>
          <button class="btn" id="btnAI" type="button">Consultar IA (simulada)</button>
          <pre id="aiOut" style="white-space:pre-wrap;background:#0c1323;border:1px solid rgba(255,255,255,.08);padding:10px;border-radius:10px;margin-top:8px"></pre>
        </details>

        <details style="margin-top:10px">
          <summary>ğŸ”— QR del sitio (se genera al publicar)</summary>
          <div class="muted">Tras publicar tu pÃ¡gina, pegaremos aquÃ­ el QR con la URL final.</div>
          <img id="qrImg" class="qr" alt="QR del sitio" />
        </details>
      </aside>
    </div>

    <footer>
      <div>Â© Demo de orientaciÃ³n. Ãšltima actualizaciÃ³n: <span id="last"></span></div>
    </footer>
  </div>

  <script>
    const out = document.getElementById('out');
    const last = document.getElementById('last');
    const aiOut = document.getElementById('aiOut');

    last.textContent = new Date().toLocaleString();

    const CATALOG = {
      // Basado SOLO en el documento del grupo (no diagnÃ³stico). Cada remedio incluye usos tentativos.
      remedies: [
        { key: 'miel_limon', icon: 'ğŸ¯ğŸ‹', name: 'Miel con limÃ³n', helps: ['tos','dolor_garganta','resfriado_gripe'], pros: ['Suaviza garganta','Sabor agradable'], cons: ['No usar en menores de 1 aÃ±o'] },
        { key: 'jengibre_miel', icon: 'ğŸ«šğŸ¯', name: 'Jengibre con miel', helps: ['nausea','malestar_digestivo','resfriado_gripe'], pros: ['Antiinflamatorio ligero'], cons: ['Evitar en Ãºlcera activa'] },
        { key: 'aloe_gel', icon: 'ğŸŒµ', name: 'SÃ¡bila (gel tÃ³pico)', helps: ['irritacion_piel','quemadura_leve','heridas_leves'], pros: ['Hidratante','Calmante'], cons: ['No ingerir el lÃ¡tex'] },
        { key: 'compresa_sabila', icon: 'ğŸ§ŠğŸŒµ', name: 'Compresa de sÃ¡bila para golpes', helps: ['dolor_muscular','golpes','inflamacion_local'], pros: ['Refresca y desinflama'], cons: ['Uso externo'] },
        { key: 'te_jamaica', icon: 'ğŸŒºâ˜•', name: 'TÃ© de jamaica', helps: ['inflamacion_general','hidratacion'], pros: ['Bebida ligera'], cons: ['Puede bajar la presiÃ³n en sensibles'] },
        { key: 'te_eucalipto', icon: 'ğŸŒ¿â˜•', name: 'TÃ© / vapor de eucalipto', helps: ['congestion','tos','resfriado_gripe'], pros: ['Despeja vÃ­as respiratorias'], cons: ['Evitar en niÃ±os pequeÃ±os sin guÃ­a'] },
        { key: 'valeriana', icon: 'ğŸ›ŒğŸŒ¿', name: 'InfusiÃ³n de valeriana', helps: ['insomnio','ansiedad'], pros: ['Relajante'], cons: ['Puede dar somnolencia'] },
        { key: 'rabano_miel', icon: 'ğŸ–¤ğŸ¥„', name: 'Jarabe de rÃ¡bano con miel', helps: ['tos','dolor_garganta','expectoracion'], pros: ['Tradicional en zonas andinas'], cons: ['Sabor fuerte'] },
        { key: 'hierbabuena_sal', icon: 'ğŸŒ¿ğŸ§‚', name: 'Hierbabuena con sal (cataplasma)', helps: ['golpes','dolor_muscular','inflamacion_local'], pros: ['AplicaciÃ³n local'], cons: ['No en piel lesionada'] },
        { key: 'manzanilla_anis_menta', icon: 'ğŸŒ¼â­ğŸŒ¿', name: 'TÃ© de manzanilla, anÃ­s y menta', helps: ['malestar_digestivo','gases','nausea'], pros: ['Posible alivio post-comida'], cons: ['Evitar exceso de anÃ­s en niÃ±os'] },
        { key: 'leche_miel_nuez', icon: 'ğŸ¥›ğŸ¯', name: 'Leche con miel y nuez moscada', helps: ['insomnio','ansiedad'], pros: ['Ritual nocturno reconfortante'], cons: ['LÃ¡cteos: revisar tolerancia'] },
        { key: 'canelazo', icon: 'ğŸ”¥ğŸŒ™', name: 'Canelazo (canela, limÃ³n y miel)', helps: ['resfriado_gripe','frio_corporal'], pros: ['Reconforta en clima frÃ­o'], cons: ['Evitar alcoholes en menores (si aplica)'] },
        { key: 'hoja_aire', icon: 'ğŸŒ¿ğŸ—£ï¸', name: 'Hoja del aire (gÃ¡rgaras)', helps: ['dolor_garganta','inflamacion_local'], pros: ['Uso tradicional'], cons: ['Evidencia limitada'] },
        { key: 'ajo_leche', icon: 'ğŸ§„ğŸ¥›', name: 'Ajo con leche', helps: ['tos','congestion'], pros: ['Ajo con compuestos antimicrobianos'], cons: ['Sabor/aroma intensos'] },
        { key: 'agua_perejil', icon: 'ğŸŒ¿ğŸ’§', name: 'Agua de perejil', helps: ['retencion_liquidos'], pros: ['DiurÃ©tico tradicional'], cons: ['Evitar exceso; posible irritaciÃ³n renal'] },
        { key: 'oil_pulling', icon: 'ğŸ¥¥ğŸ«—', name: 'Aceite de coco (enjuague bucal)', helps: ['mal_aliento','higiene_bucal'], pros: ['Sencillo'], cons: ['No tragar'] },
        { key: 'coco_lavanda', icon: 'ğŸ¥¥ğŸ’œ', name: 'Aceite de coco con lavanda (piel)', helps: ['irritacion_piel','cicatrizacion'], pros: ['Hidratante y calmante'], cons: ['Evitar alergias a aceites esenciales'] },
        { key: 'pepa_papaya', icon: 'ğŸ¥­', name: 'Pepa de papaya (purgante tradicional)', helps: ['malestar_digestivo'], pros: ['Enzimas digestivas'], cons: ['Eficacia como purgante no comprobada'] },
        { key: 'piedra_alumbre', icon: 'ğŸª¨', name: 'Piedra de alumbre (aftas)', helps: ['aftas','heridas_leves'], pros: ['Astringente local'], cons: ['No ingerir; enjuagar bien'] },
        { key: 'vinagre_manzana', icon: 'ğŸğŸ§´', name: 'Vinagre de manzana (diluido)', helps: ['acidez','digestivo','garganta_irritada','picaduras'], pros: ['MultipropÃ³sito tradicional'], cons: ['Usar siempre diluido'] },
        { key: 'kombucha', icon: 'ğŸ¥¤', name: 'Kombucha', helps: ['digestivo','salud_intestinal'], pros: ['ProbiÃ³ticos'], cons: ['Cuidado en personas sensibles a fermentados'] },
        { key: 'kefir', icon: 'ğŸ¥›ğŸ«§', name: 'KÃ©fir', helps: ['salud_intestinal','intolerancia_lactosa_parcial'], pros: ['ProbiÃ³ticos y nutrientes'], cons: ['Revisar tolerancia a lÃ¡cteos'] },
        { key: 'kimchi', icon: 'ğŸ¥¬ğŸŒ¶ï¸', name: 'Kimchi', helps: ['salud_intestinal'], pros: ['ProbiÃ³ticos; bajo en calorÃ­as'], cons: ['Picante/sodio en exceso'] }
      ]
    };

    function render(recs){
      out.innerHTML = '';
      if(!recs || recs.length === 0){ out.innerHTML = '<div class="muted">No hay sugerencias aÃºn. Completa el formulario y presiona "Ver sugerencias".</div>'; return; }
      recs.forEach(r=>{
        const el = document.createElement('div');
        el.className = 'rec-item';
        el.innerHTML = `
          <h4>${r.icon || ''} ${r.name}</h4>
          <div class="proscons">
            <div><strong>Ayuda con</strong><ul>${(r.helps||[]).map(h=>`<li>${h.replaceAll('_',' ')}</li>`).join('')}</ul></div>
            <div><strong>Notas</strong>
              <ul>
                ${(r.pros||[]).map(p=>`<li class="badge-ok">${p}</li>`).join('')}
                ${(r.cons||[]).map(c=>`<li class="badge-warn">${c}</li>`).join('')}
              </ul>
            </div>
          </div>
          <div class="muted" style="margin-top:8px">Uso tradicional y educativo basado en el documento del grupo.</div>
        `;
        out.appendChild(el);
      })
    }

    document.getElementById('form').addEventListener('submit', (e)=>{
      e.preventDefault();
      const form = e.currentTarget;
      const syms = new Set(Array.from(form.querySelectorAll('input[name="sym"]:checked')).map(i=>i.value));

      // SelecciÃ³n: mostrar todos los remedios que "ayudan" con al menos 1 sÃ­ntoma marcado.
      let recs = CATALOG.remedies.filter(r => (r.helps||[]).some(h => syms.has(h) || (h==='resfriado_gripe' && (syms.has('tos')||syms.has('congestion')||syms.has('dolor_garganta')||syms.has('fiebre')))));

      // Si no marcÃ³ nada, sugerir medidas generales de los fermentados/digestivos o mostrar todos ordenados por nombre
      if(syms.size===0){
        recs = CATALOG.remedies.slice(0,6); // muestra un subconjunto inicial
      }
      render(recs);
    });
      const form = e.currentTarget;
      const cond = document.getElementById('cond').value || 'indef';
      const syms = Array.from(form.querySelectorAll('input[name="sym"]:checked')).map(i=>i.value);

      // Reglas simples (ejemplo):
      let key = cond;
      if(cond === 'indef'){
        if(syms.includes('tos') || syms.includes('congestion') || syms.includes('garganta')) key = 'gripe';
        if(syms.includes('dolor_cabeza') && !syms.includes('tos') && !syms.includes('congestion')) key = 'migraÃ±a';
        if(syms.includes('dolor_muscular') && syms.length === 1) key = 'dolor_muscular';
      }
      render(CATALOG[key]);
    });

    document.getElementById('btnReset').addEventListener('click',()=>{
      document.getElementById('form').reset();
      render([]);
    });

    // IA simulada (aquÃ­ irÃ­a la llamada a una API real de bajo costo)
    document.getElementById('btnAI').addEventListener('click', async ()=>{
      aiOut.textContent = 'Consultandoâ€¦';
      // SimulaciÃ³n de latencia
      await new Promise(r=>setTimeout(r, 400));
      // DemostraciÃ³n de combinaciÃ³n de sÃ­ntomas/condiciÃ³n
      const cond = document.getElementById('cond').value || 'indef';
      aiOut.textContent = `OrientaciÃ³n generada (demo): dada la selecciÃ³n "${cond}", considera iniciar con medidas generales (hidrataciÃ³n, descanso). Si aparecen signos de alarma (dolor intenso, fiebre alta persistente, dificultad para respirar), busca atenciÃ³n mÃ©dica.`;
    });

    // Utilidad: establecer QR cuando tengamos la URL final (ej.: GitHub Pages)
    // Llama a setupQR una vez publicada la URL final
    setupQR('https://rolansor.github.io/prueba_proyecto/');
    window.setupQR = setupQR;

    // Inicial
    render([]);
  </script>
</body>
</html>
