<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Orientación rápida de síntomas (demo)</title>
  <style>
    :root{--bg:#0f172a;--card:#111827;--muted:#6b7280;--accent:#22d3ee;--ok:#10b981;--warn:#f59e0b;--err:#ef4444;--txt:#e5e7eb}
    *{box-sizing:border-box}
    body{margin:0;font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu;line-height:1.35;background:linear-gradient(180deg,#020617,#0b1022);color:var(--txt);min-height:100dvh;}
    .wrap{max-width:900px;margin:0 auto;padding:24px}
    header{display:flex;align-items:center;gap:16px;margin:20px 0 12px}
    header .logo{width:44px;height:44px;border-radius:12px;background:radial-gradient(circle at 30% 30%, var(--accent), transparent 60%),linear-gradient(135deg,#111,#333);display:grid;place-items:center;box-shadow:0 10px 30px rgba(34,211,238,.25)}
    header h1{font-size:clamp(20px,3vw,28px);margin:0}
    .card{background:linear-gradient(180deg,#0b1222,#0a0f1b);border:1px solid rgba(255,255,255,.06);border-radius:16px;padding:20px;box-shadow:0 10px 30px rgba(2,6,23,.45)}
    .grid{display:grid;grid-template-columns:1fr;gap:16px}
    @media (min-width:880px){.grid{grid-template-columns:1.1fr .9fr}}
    fieldset{border:0;margin:0;padding:0}
    legend{font-weight:700;margin-bottom:8px}
    label{display:flex;align-items:center;gap:10px;margin:8px 0}
    input[type="text"], select, textarea{width:100%;background:#0c1323;color:var(--txt);border:1px solid rgba(255,255,255,.08);border-radius:10px;padding:12px}
    .btn{display:inline-flex;align-items:center;gap:8px;background:linear-gradient(180deg,#1f2937,#111827);color:var(--txt);border:1px solid rgba(255,255,255,.12);border-radius:12px;padding:10px 14px;cursor:pointer}
    .btn:hover{border-color:rgba(255,255,255,.25)}
    .btn.primary{background:linear-gradient(180deg,#0ea5e9,#0284c7);color:#05131f;border:none}
    .muted{color:var(--muted);font-size:14px}
    .pill{display:inline-block;padding:6px 10px;border-radius:999px;background:#0c1323;border:1px solid rgba(255,255,255,.08);font-size:12px}
    .rec{display:flex;flex-direction:column;gap:10px}
    .rec-item{border:1px solid rgba(255,255,255,.08);border-radius:12px;padding:12px;background:#0b1222}
    .rec-item h4{margin:0 0 6px;font-size:16px}
    .proscons{display:grid;grid-template-columns:1fr 1fr;gap:10px}
    .proscons ul{margin:0 0 0 18px}
    .badge-ok{color:#052; background:#052a; border:1px solid #0f55}
    .badge-warn{color:#3d2a05; background:#3d2a05aa; border:1px solid #7a520b}
    .disclaimer{font-size:13px;color:#c7cbd6;background:#0a0f1b;border:1px dashed rgba(255,255,255,.15);border-radius:12px;padding:12px}
    footer{margin:20px 0;color:#94a3b8;font-size:13px}
    .qr{display:none;margin-top:8px}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="logo" aria-hidden="true">🩺</div>
      <div>
        <h1>Orientación rápida de síntomas <span class="pill">DEMO</span></h1>
        <div class="muted">No es diagnóstico médico. Para urgencias, acude a un servicio de salud.</div>
      </div>
    </header>

    <div class="grid">
      <section class="card">
        <form id="form">
          <fieldset>
            <legend>¿Qué presentas hoy?</legend>
            <label><input type="checkbox" name="sym" value="fiebre" /> Fiebre</label>
            <label><input type="checkbox" name="sym" value="tos" /> Tos</label>
            <label><input type="checkbox" name="sym" value="dolor_garganta" /> Dolor de garganta</label>
            <label><input type="checkbox" name="sym" value="congestion" /> Congestión nasal</label>
            <label><input type="checkbox" name="sym" value="dolor_cabeza" /> Dolor de cabeza / migraña</label>
            <label><input type="checkbox" name="sym" value="dolor_muscular" /> Dolor muscular / golpes</label>
            <label><input type="checkbox" name="sym" value="nausea" /> Náuseas / malestar digestivo</label>
            <label><input type="checkbox" name="sym" value="acidez" /> Acidez estomacal</label>
            <label><input type="checkbox" name="sym" value="insomnio" /> Ansiedad / insomnio</label>
            <label><input type="checkbox" name="sym" value="irritacion_piel" /> Irritación cutánea / quemadura leve</label>
            <label><input type="checkbox" name="sym" value="heridas_leves" /> Heridas leves / aftas</label>
            <label><input type="checkbox" name="sym" value="mal_aliento" /> Mal aliento</label>
            <label><input type="checkbox" name="sym" value="retencion_liquidos" /> Retención de líquidos</label>
          </fieldset>

          <div style="margin-top:12px"></div>
          <label>
            Posible condición (autorreporte)
            <select id="cond">
              <option value="">— Selecciona —</option>
              <option value="gripe">Gripe / resfriado</option>
              <option value="migraña">Migraña / cefalea</option>
              <option value="dolor_muscular">Dolor muscular</option>
              <option value="indef">No sé / prefiero que me orienten</option>
            </select>
          </label>

          <div style="display:flex;gap:10px;margin-top:14px">
            <button class="btn primary" type="submit">Ver sugerencias</button>
            <button class="btn" id="btnReset" type="button">Limpiar</button>
          </div>
        </form>

        <div class="disclaimer" style="margin-top:14px">
          <strong>Aviso de seguridad:</strong> este sitio es educativo y genérico. No reemplaza una evaluación clínica.
          Revisa siempre contraindicaciones y <em>etiquetas</em> de medicamentos. Si hay dolor intenso, dificultad para
          respirar, fiebre alta persistente, rigidez de cuello, confusión, deshidratación o síntomas en niños pequeños
          o embarazadas, busca atención profesional.
        </div>
      </section>

      <aside class="card">
        <h3 style="margin-top:0">Sugerencias</h3>
        <div id="out" class="rec"></div>

        <details style="margin-top:10px">
          <summary>💡 Activar orientación con IA (demo)</summary>
          <p class="muted">Esta sección puede conectarse a una API de IA de bajo costo. Aquí simulamos una llamada.</p>
          <button class="btn" id="btnAI" type="button">Consultar IA (simulada)</button>
          <pre id="aiOut" style="white-space:pre-wrap;background:#0c1323;border:1px solid rgba(255,255,255,.08);padding:10px;border-radius:10px;margin-top:8px"></pre>
        </details>

        <details style="margin-top:10px">
          <summary>🔗 QR del sitio (se genera al publicar)</summary>
          <div class="muted">Tras publicar tu página, pegaremos aquí el QR con la URL final.</div>
          <img id="qrImg" class="qr" alt="QR del sitio" />
        </details>
      </aside>
    </div>

    <footer>
      <div>© Demo de orientación. Última actualización: <span id="last"></span></div>
    </footer>
  </div>

  <script>
    const out = document.getElementById('out');
    const last = document.getElementById('last');
    const aiOut = document.getElementById('aiOut');

    last.textContent = new Date().toLocaleString();

    const CATALOG = {
      // Basado SOLO en el documento del grupo (no diagnóstico). Cada remedio incluye usos tentativos.
      remedies: [
        { key: 'miel_limon', icon: '🍯🍋', name: 'Miel con limón', helps: ['tos','dolor_garganta','resfriado_gripe'], pros: ['Suaviza garganta','Sabor agradable'], cons: ['No usar en menores de 1 año'] },
        { key: 'jengibre_miel', icon: '🫚🍯', name: 'Jengibre con miel', helps: ['nausea','malestar_digestivo','resfriado_gripe'], pros: ['Antiinflamatorio ligero'], cons: ['Evitar en úlcera activa'] },
        { key: 'aloe_gel', icon: '🌵', name: 'Sábila (gel tópico)', helps: ['irritacion_piel','quemadura_leve','heridas_leves'], pros: ['Hidratante','Calmante'], cons: ['No ingerir el látex'] },
        { key: 'compresa_sabila', icon: '🧊🌵', name: 'Compresa de sábila para golpes', helps: ['dolor_muscular','golpes','inflamacion_local'], pros: ['Refresca y desinflama'], cons: ['Uso externo'] },
        { key: 'te_jamaica', icon: '🌺☕', name: 'Té de jamaica', helps: ['inflamacion_general','hidratacion'], pros: ['Bebida ligera'], cons: ['Puede bajar la presión en sensibles'] },
        { key: 'te_eucalipto', icon: '🌿☕', name: 'Té / vapor de eucalipto', helps: ['congestion','tos','resfriado_gripe'], pros: ['Despeja vías respiratorias'], cons: ['Evitar en niños pequeños sin guía'] },
        { key: 'valeriana', icon: '🛌🌿', name: 'Infusión de valeriana', helps: ['insomnio','ansiedad'], pros: ['Relajante'], cons: ['Puede dar somnolencia'] },
        { key: 'rabano_miel', icon: '🖤🥄', name: 'Jarabe de rábano con miel', helps: ['tos','dolor_garganta','expectoracion'], pros: ['Tradicional en zonas andinas'], cons: ['Sabor fuerte'] },
        { key: 'hierbabuena_sal', icon: '🌿🧂', name: 'Hierbabuena con sal (cataplasma)', helps: ['golpes','dolor_muscular','inflamacion_local'], pros: ['Aplicación local'], cons: ['No en piel lesionada'] },
        { key: 'manzanilla_anis_menta', icon: '🌼⭐🌿', name: 'Té de manzanilla, anís y menta', helps: ['malestar_digestivo','gases','nausea'], pros: ['Posible alivio post-comida'], cons: ['Evitar exceso de anís en niños'] },
        { key: 'leche_miel_nuez', icon: '🥛🍯', name: 'Leche con miel y nuez moscada', helps: ['insomnio','ansiedad'], pros: ['Ritual nocturno reconfortante'], cons: ['Lácteos: revisar tolerancia'] },
        { key: 'canelazo', icon: '🔥🌙', name: 'Canelazo (canela, limón y miel)', helps: ['resfriado_gripe','frio_corporal'], pros: ['Reconforta en clima frío'], cons: ['Evitar alcoholes en menores (si aplica)'] },
        { key: 'hoja_aire', icon: '🌿🗣️', name: 'Hoja del aire (gárgaras)', helps: ['dolor_garganta','inflamacion_local'], pros: ['Uso tradicional'], cons: ['Evidencia limitada'] },
        { key: 'ajo_leche', icon: '🧄🥛', name: 'Ajo con leche', helps: ['tos','congestion'], pros: ['Ajo con compuestos antimicrobianos'], cons: ['Sabor/aroma intensos'] },
        { key: 'agua_perejil', icon: '🌿💧', name: 'Agua de perejil', helps: ['retencion_liquidos'], pros: ['Diurético tradicional'], cons: ['Evitar exceso; posible irritación renal'] },
        { key: 'oil_pulling', icon: '🥥🫗', name: 'Aceite de coco (enjuague bucal)', helps: ['mal_aliento','higiene_bucal'], pros: ['Sencillo'], cons: ['No tragar'] },
        { key: 'coco_lavanda', icon: '🥥💜', name: 'Aceite de coco con lavanda (piel)', helps: ['irritacion_piel','cicatrizacion'], pros: ['Hidratante y calmante'], cons: ['Evitar alergias a aceites esenciales'] },
        { key: 'pepa_papaya', icon: '🥭', name: 'Pepa de papaya (purgante tradicional)', helps: ['malestar_digestivo'], pros: ['Enzimas digestivas'], cons: ['Eficacia como purgante no comprobada'] },
        { key: 'piedra_alumbre', icon: '🪨', name: 'Piedra de alumbre (aftas)', helps: ['aftas','heridas_leves'], pros: ['Astringente local'], cons: ['No ingerir; enjuagar bien'] },
        { key: 'vinagre_manzana', icon: '🍎🧴', name: 'Vinagre de manzana (diluido)', helps: ['acidez','digestivo','garganta_irritada','picaduras'], pros: ['Multipropósito tradicional'], cons: ['Usar siempre diluido'] },
        { key: 'kombucha', icon: '🥤', name: 'Kombucha', helps: ['digestivo','salud_intestinal'], pros: ['Probióticos'], cons: ['Cuidado en personas sensibles a fermentados'] },
        { key: 'kefir', icon: '🥛🫧', name: 'Kéfir', helps: ['salud_intestinal','intolerancia_lactosa_parcial'], pros: ['Probióticos y nutrientes'], cons: ['Revisar tolerancia a lácteos'] },
        { key: 'kimchi', icon: '🥬🌶️', name: 'Kimchi', helps: ['salud_intestinal'], pros: ['Probióticos; bajo en calorías'], cons: ['Picante/sodio en exceso'] }
      ]
    };

    function render(recs){
      out.innerHTML = '';
      if(!recs || recs.length === 0){ out.innerHTML = '<div class="muted">No hay sugerencias aún. Completa el formulario y presiona "Ver sugerencias".</div>'; return; }
      recs.forEach(r=>{
        const el = document.createElement('div');
        el.className = 'rec-item';
        el.innerHTML = `
          <h4>${r.icon || ''} ${r.name}</h4>
          <div class="proscons">
            <div><strong>Ayuda con</strong><ul>${(r.helps||[]).map(h=>`<li>${h.replaceAll('_',' ')}</li>`).join('')}</ul></div>
            <div><strong>Notas</strong>
              <ul>
                ${(r.pros||[]).map(p=>`<li class="badge-ok">${p}</li>`).join('')}
                ${(r.cons||[]).map(c=>`<li class="badge-warn">${c}</li>`).join('')}
              </ul>
            </div>
          </div>
          <div class="muted" style="margin-top:8px">Uso tradicional y educativo basado en el documento del grupo.</div>
        `;
        out.appendChild(el);
      })
    }

    document.getElementById('form').addEventListener('submit', (e)=>{
      e.preventDefault();
      const form = e.currentTarget;
      const syms = new Set(Array.from(form.querySelectorAll('input[name="sym"]:checked')).map(i=>i.value));

      // Selección: mostrar todos los remedios que "ayudan" con al menos 1 síntoma marcado.
      let recs = CATALOG.remedies.filter(r => (r.helps||[]).some(h => syms.has(h) || (h==='resfriado_gripe' && (syms.has('tos')||syms.has('congestion')||syms.has('dolor_garganta')||syms.has('fiebre')))));

      // Si no marcó nada, sugerir medidas generales de los fermentados/digestivos o mostrar todos ordenados por nombre
      if(syms.size===0){
        recs = CATALOG.remedies.slice(0,6); // muestra un subconjunto inicial
      }
      render(recs);
    });
      const form = e.currentTarget;
      const cond = document.getElementById('cond').value || 'indef';
      const syms = Array.from(form.querySelectorAll('input[name="sym"]:checked')).map(i=>i.value);

      // Reglas simples (ejemplo):
      let key = cond;
      if(cond === 'indef'){
        if(syms.includes('tos') || syms.includes('congestion') || syms.includes('garganta')) key = 'gripe';
        if(syms.includes('dolor_cabeza') && !syms.includes('tos') && !syms.includes('congestion')) key = 'migraña';
        if(syms.includes('dolor_muscular') && syms.length === 1) key = 'dolor_muscular';
      }
      render(CATALOG[key]);
    });

    document.getElementById('btnReset').addEventListener('click',()=>{
      document.getElementById('form').reset();
      render([]);
    });

    // IA simulada (aquí iría la llamada a una API real de bajo costo)
    document.getElementById('btnAI').addEventListener('click', async ()=>{
      aiOut.textContent = 'Consultando…';
      // Simulación de latencia
      await new Promise(r=>setTimeout(r, 400));
      // Demostración de combinación de síntomas/condición
      const cond = document.getElementById('cond').value || 'indef';
      aiOut.textContent = `Orientación generada (demo): dada la selección "${cond}", considera iniciar con medidas generales (hidratación, descanso). Si aparecen signos de alarma (dolor intenso, fiebre alta persistente, dificultad para respirar), busca atención médica.`;
    });

    // Utilidad: establecer QR cuando tengamos la URL final (ej.: GitHub Pages)
    // Llama a setupQR una vez publicada la URL final
    setupQR('https://rolansor.github.io/prueba_proyecto/');
    window.setupQR = setupQR;

    // Inicial
    render([]);
  </script>
</body>
</html>
